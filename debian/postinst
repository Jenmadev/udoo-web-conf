#!/bin/sh
# postinst script for udoo-web-conf
#
# see: dh_installdeb(1)

set -e

case "$1" in
  configure)

    [ -d /opt/udoo-web-conf/node_modules ] || 
    {
      command -v npm >/dev/null 2>&1 || 
      { 
        echo >&2 "I require npm but it's not installed.  Aborting."
        exit 1
      }
      echo "Running npm...."
      cd /opt/udoo-web-conf
      sudo -H -u root npm i
    }
    echo "Starting udoo-web-conf"
    start udoo-web-conf
    ;;

  abort-upgrade|abort-remove|abort-deconfigure)
    ;;

  *)
    echo "postinst called with unknown argument \`$1'" >&2
    exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0


